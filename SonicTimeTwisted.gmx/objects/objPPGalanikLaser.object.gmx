<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprLaserMaskSpread</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>2</depth>
  <persistent>0</persistent>
  <parentName>objNonSolid</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>604</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_inherited</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>x2=x;
xOffset1Left=-6;
xOffset1Right=6;
xOffset2Left=0;
xOffset2Right=0;
xOffset2LeftMax=0;
xOffset2RightMax=0;
yoffset =0;//10
platformId=noone;
createFlame=true;
laser=0;
xOriginOffset=0;
yOriginOffset=-10;
state =1000;

alarm[0] = 200;
alarm[1] = 320;
remove=0;
visible = false;
reaction_script = noone;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>stop_sound(sndMetalLaser);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>state = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if objGalanik.state &lt; 4 {
    state = 0;
    play_sfx(sndMetalLaser,10,true);
    visible = true;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// State
switch state {
case 0: // Start Firing
    with objGalanik {
        other.x=x+other.xOriginOffset;
        other.y=y+other.yOriginOffset;
        }
    
    
    if instance_exists(platformId) {
    
    
    if laser == 0 {
    
        x2=platformId.x+platformId.sprite_width*0.25;
        
        
    } else {
    
        x2=platformId.x+platformId.sprite_width*0.75;
    
    }
    
    xOffset2LeftMax=-(platformId.sprite_width*0.25);
    xOffset2RightMax=platformId.sprite_width*0.25;
    
    if xOffset2LeftMax &lt; xOffset2Left {
        xOffset2Left-=1;
    }
    
    if xOffset2RightMax &gt; xOffset2Right {
        xOffset2Right+=1;
    }
    
    //xoffset = abs(platformId.x - x);
    
        if y+yoffset+12 &lt; platformId.y {
        
            yoffset+=6;
            image_xscale += (xOffset2Right+xOffset2Left)/32;
            image_yscale += yoffset/720;
        
        } else if y+yoffset-12 &gt; platformId.y {
        
            yoffset-=6;
            image_xscale += (xOffset2Right+xOffset2Left)/32;
            image_yscale -= yoffset/720;
        
        } else {
        
            if createFlame == true  {
                for(i = 0; i &lt; 64; i+=16;) {
                    with instance_create(x2+xOffset2Left+i, floor(y+yoffset),objLaserFire) {
                        parentId = other.platformId;
                        xoffset = other.i;
                        laser = other.laser;
                    }
                }
                
                createFlame = false;
            }
        }
    }
    
break;
case 1: // End Firing
    with objGalanik {
        other.x=x+other.xOriginOffset;
        other.y=y+other.yOriginOffset;
    }
    //yOriginOffset += 6;
    //if yOriginOffset &gt; yoffset+32
        yoffset+=6;
        
    y+=6;
    image_yscale -= yoffset/720;
    
    //if yOriginOffset &gt; 64 {
    if yoffset &gt; 64 {
        // Move Eggman offscreen
        with objGalanik {
         
            if state == 3 { 
                state = 4; 
            }
        }
        
        instance_destroy();
    }
break;
}
if instance_exists(platformId) {
    if laser == 0
        image_angle = point_direction(x,y,platformId.x+32,platformId.y)+90
    else image_angle = point_direction(x,y,platformId.bbox_right-32,platformId.y)+90
    
}
if state &lt; 2 
    reaction_script = player_reaction_harmful;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Flash Visiblity
if state &lt; 1000
    visible = !visible;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Render laser (beam)
draw_set_color(c_red);
draw_set_alpha(0.75);
draw_primitive_begin(pr_trianglestrip);
draw_vertex(floor(x+xOffset1Left), floor(y)+yOriginOffset);
draw_vertex(floor(x+xOffset1Right), floor(y)+yOriginOffset);
draw_vertex(floor(x2+xOffset2Left), floor(y+yoffset));
draw_vertex(floor(x2+xOffset2Right), floor(y+yoffset));
draw_primitive_end();
draw_set_color(c_white);
draw_set_alpha(1);
//draw_self();
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
